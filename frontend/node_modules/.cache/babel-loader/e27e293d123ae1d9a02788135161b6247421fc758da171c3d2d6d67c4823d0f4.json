{"ast":null,"code":"var _jsxFileName = \"c:\\\\Users\\\\hp\\\\chat-app\\\\frontend\\\\src\\\\components\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Chat({\n  username\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [activeUsers, setActiveUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [message, setMessage] = useState('');\n  // Add these new state variables\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [filePreview, setFilePreview] = useState(null);\n  const [isTyping, setIsTyping] = useState(false);\n\n  // Add these new handler functions\n  const handleTyping = text => {\n    setMessage(text);\n    if (selectedUser) {\n      socket.emit('typing', {\n        user: username,\n        receiver: selectedUser\n      });\n    }\n  };\n  const onEmojiClick = (event, emojiObject) => {\n    setMessage(prevMessage => prevMessage + emojiObject.emoji);\n  };\n  const handleFileUpload = event => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setFilePreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // Rest of your existing code...\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      username: username,\n      activeUsers: activeUsers,\n      selectedUser: selectedUser,\n      onSelectUser: setSelectedUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-box\",\n      children: selectedUser ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-header\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Chat with \", selectedUser]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"messages\",\n          children: messages.filter(msg => msg.sender === selectedUser && msg.receiver === username || msg.sender === username && msg.receiver === selectedUser).map((msg, index) => /*#__PURE__*/_jsxDEV(Message, {\n            text: msg.message,\n            isSender: msg.sender === username,\n            time: new Date(msg.timestamp).toLocaleTimeString()\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(ChatInput, {\n          message: message,\n          setMessage: handleTyping,\n          handleSubmit: handleSubmit,\n          onEmojiClick: onEmojiClick,\n          showEmojiPicker: showEmojiPicker,\n          setShowEmojiPicker: setShowEmojiPicker,\n          handleFileUpload: handleFileUpload,\n          filePreview: filePreview,\n          setFilePreview: setFilePreview\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-chat-selected\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Welcome, \", username, \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Select a user to start chatting\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n}\n_s(Chat, \"iICds3VKyXjTF8rxGXOSU+/Gyl0=\");\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["Chat","username","_s","messages","setMessages","useState","activeUsers","setActiveUsers","selectedUser","setSelectedUser","message","setMessage","showEmojiPicker","setShowEmojiPicker","filePreview","setFilePreview","isTyping","setIsTyping","handleTyping","text","socket","emit","user","receiver","onEmojiClick","event","emojiObject","prevMessage","emoji","handleFileUpload","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","_jsxDEV","className","children","Sidebar","onSelectUser","fileName","_jsxFileName","lineNumber","columnNumber","_Fragment","filter","msg","sender","map","index","Message","isSender","time","Date","timestamp","toLocaleTimeString","ChatInput","handleSubmit","_c","$RefreshReg$"],"sources":["c:/Users/hp/chat-app/frontend/src/components/Chat.js"],"sourcesContent":["function Chat({ username }) {\r\n    const [messages, setMessages] = useState([]);\r\n    const [activeUsers, setActiveUsers] = useState([]);\r\n    const [selectedUser, setSelectedUser] = useState(null);\r\n    const [message, setMessage] = useState('');\r\n    // Add these new state variables\r\n    const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n    const [filePreview, setFilePreview] = useState(null);\r\n    const [isTyping, setIsTyping] = useState(false);\r\n\r\n    // Add these new handler functions\r\n    const handleTyping = (text) => {\r\n        setMessage(text);\r\n        if (selectedUser) {\r\n            socket.emit('typing', { user: username, receiver: selectedUser });\r\n        }\r\n    };\r\n\r\n    const onEmojiClick = (event, emojiObject) => {\r\n        setMessage(prevMessage => prevMessage + emojiObject.emoji);\r\n    };\r\n\r\n    const handleFileUpload = (event) => {\r\n        const file = event.target.files[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setFilePreview(reader.result);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    // Rest of your existing code...\r\n\r\n    return (\r\n        <div className=\"chat-container\">\r\n            <Sidebar\r\n                username={username}\r\n                activeUsers={activeUsers}\r\n                selectedUser={selectedUser}\r\n                onSelectUser={setSelectedUser}\r\n            />\r\n            \r\n            <div className=\"chat-box\">\r\n                {selectedUser ? (\r\n                    <>\r\n                        <div className=\"chat-header\">\r\n                            <h3>Chat with {selectedUser}</h3>\r\n                        </div>\r\n                        <div className=\"messages\">\r\n                            {messages\r\n                                .filter(msg => \r\n                                    (msg.sender === selectedUser && msg.receiver === username) ||\r\n                                    (msg.sender === username && msg.receiver === selectedUser)\r\n                                )\r\n                                .map((msg, index) => (\r\n                                    <Message\r\n                                        key={index}\r\n                                        text={msg.message}\r\n                                        isSender={msg.sender === username}\r\n                                        time={new Date(msg.timestamp).toLocaleTimeString()}\r\n                                    />\r\n                                ))}\r\n                        </div>\r\n                        <ChatInput\r\n                            message={message}\r\n                            setMessage={handleTyping}\r\n                            handleSubmit={handleSubmit}\r\n                            onEmojiClick={onEmojiClick}\r\n                            showEmojiPicker={showEmojiPicker}\r\n                            setShowEmojiPicker={setShowEmojiPicker}\r\n                            handleFileUpload={handleFileUpload}\r\n                            filePreview={filePreview}\r\n                            setFilePreview={setFilePreview}\r\n                        />\r\n                    </>\r\n                ) : (\r\n                    <div className=\"no-chat-selected\">\r\n                        <h3>Welcome, {username}!</h3>\r\n                        <p>Select a user to start chatting</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}